<!-- <br />
<br />
<br />
<br />
<br />
<head><%= link_to "View graph for this data", new_graph_path(:id => @passedid), class: "btn btn-primary" %></head>
<br />
<br />
<br />
<br />
<br />
<br />
<br />
<br /> -->
<body>
<h1>Chart</h1> 
<%= form_tag("/graphs/new?id=#{@passedid}", method:"post") do |f| %>

<% xaxis = Array.new; yaxis = Array.new %>
 



    
    <table style="align :left">
    <tr style="align :left"><td style="align :left"> X Axis</td>
    <td style="align :left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>  <!-- <th> Y Axis </th> -->
    <td style="align :left"><%= select_tag "xaxis", options_for_select( @keysMap,  @keysMap[0])   %></td>

    </tr>
    </table>

    <table style="align :left">
    <tr style="align :left"><td style="align :left"> Y Axis </td>  
    <td style="align :left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp&nbsp;&nbsp;&nbsp;&nbsp;</td> 
    <% flag = 1%>
    <% @keysMap.each do |x| %>
        
         <!-- <td><%= radio_button_tag("xaxis",x,false) %><%= label_tag(:line, "#{x}") %> </td> --> 
         <td style="align :left">
            <% if flag == 1 then%>
            <% flag = 0%>
            <%= check_box_tag("y_#{x}_default",1,false,disabled:true) %><%= label_tag(:line, "#{x}") %> </td>
            <% else %>
            <%= check_box_tag("y_#{x}_default",1,false) %><%= label_tag(:line, "#{x}") %> </td>
            <%end%>
        
       
    <% end %> 
    </tr>
    </table>
    

    <table style="align :left">
    <tr style="align :left"><td style="align :left"> Label for X-axis </td>
    <td style="align :left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td style="align :left"><%= text_field_tag 'xUnits',nil, placeholder:'X-Axis Label' %></td>



    
    </table>

    </table>

    <table style="align :left">
    <tr style="align :left"><td style="align :left"> Label for Y-axis </td>
    <td style="align :left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td style="align :left"><%= text_field_tag 'yUnits',nil, placeholder:'Y-Axis Label' %></td>



    
    </table>

    <table style="align :left">
    <tr style="align :left"><td style="align :left"> Graph Type </td>
    <td style="align :left">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td style="align :left"><%= select_tag "graphType", options_for_select( ["Line Graph", "Bar Graph"]  ,"Line Graph")   %></td>



    
    </table>




    <!-- </div> --> 
   

<%= submit_tag(" Make Graph")%>

<% end %>

<div style="width:800px; margin:0 auto;" class="alert alert-warning" role="alert" style="text-align: justify;">
    Choose fields which can be shown together. For example : Red Blood cells and White blood cells count.
    <br>
    Never choose fields which don't go together. Like Height and Weight as they have different units. 
    <br>
 </div>
<a href="#dataTable" id="linkToTable">View some data of Parsed CSV</a>
<br /><br />
<div class="table" >
  <table border="1" style="display:none" id="dataTable" >
    <tr>
      <% for i in 0..@keysMap.length-1%>
          <th><%= @keysMap[i] %></th>
      <% end %>
    </tr>

    <% @rows.each do |row| %>
        <tr>
          <% for j in 0..@keysMap.length-1 %>
              <td><%= row[@keysMap[j]] %> </td>
          <% end %>
        </tr>
    <% end %>
  </table>
</div>


<script type="text/javascript">
  var linktoTable = document.getElementById('linkToTable');
  var dataTable = document.getElementById('dataTable');
  linktoTable.onclick = function() {
    dataTable.style['display'] = 'inline-table';
  };
</script>
</body>

<script type="text/javascript">
    var selectXaxis = document.getElementById('xaxis');
    var details_div = document.getElementById('Line_Chart_div');
  selectXaxis.onchange = function() {
    
    var yAxis = "y_" + selectXaxis.options[selectXaxis.selectedIndex].value + "_default"; 
    //alert(yAxis);

    var checkBox_list = document.getElementsByTagName('input');
 
    for (var i = 0; i < checkBox_list.length; i++) {
        var checkbox = checkBox_list[i];
     
        if (checkbox.getAttribute('type') == 'checkbox') {
            console.log("value of checkbo ", checkbox.value)
            checkbox.disabled = false;

        }
    } 
    document.getElementById(yAxis).checked = false; 
    document.getElementById(yAxis).disabled = true;   
  };    
</script>


    




